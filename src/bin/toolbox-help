#!/bin/sh

# Color codes
CYAN='\033[0;36m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
BOLD='\033[1m'
RESET='\033[0m'

echo -e "${CYAN}================================================================================${RESET}"
echo -e "${BOLD}${CYAN}                        TOOLBOX CONTAINER HELP${RESET}"
echo -e "${CYAN}================================================================================${RESET}"
echo ""
echo -e "${BOLD}BASE IMAGE:${RESET} nicolaka/netshoot"
echo ""
echo "Includes comprehensive networking tools:"
echo "  - Network analysis: tcpdump, wireshark, tshark"
echo "  - DNS tools: dig, nslookup, host"
echo "  - HTTP clients: curl, wget, httpie"
echo "  - Network utilities: ping, traceroute, mtr, iperf3, netcat, socat"
echo "  - TLS/SSL: openssl"
echo "  - Container tools: ctop, docker, kubectl"
echo "  - Shells: bash, zsh, fish"
echo ""
echo "Full documentation: https://github.com/nicolaka/netshoot"
echo ""
echo -e "${CYAN}================================================================================${RESET}"
echo -e "${BOLD}${CYAN}                        DATABASE CLIENTS${RESET}"
echo -e "${CYAN}================================================================================${RESET}"
echo ""
echo -e "${GREEN}MYSQL:${RESET}"
echo "  mysql -h <host> -u <user> -p"
echo ""
echo -e "${GREEN}REDIS:${RESET}"
echo "  redis-cli -h <host> -p <port>"
echo "  redis -h <host> -p <port>         # Alias for redis-cli"
echo ""
echo -e "${GREEN}MONGODB:${RESET}"
echo "  mongosh \"mongodb://user:pass@host:27017/db\""
echo "  mongo \"mongodb://user:pass@host:27017/db\"   # Alias for mongosh with TLS: --tls --tlsAllowInvalidCertificates"
echo ""
echo -e "${CYAN}================================================================================${RESET}"
echo -e "${BOLD}${CYAN}                      AWS & CLOUD TOOLS${RESET}"
echo -e "${CYAN}================================================================================${RESET}"
echo ""
echo -e "${GREEN}AWS CLI:${RESET}"
echo "  aws <command>"
echo "  aws help                          # Show AWS CLI help"
echo ""
echo -e "${CYAN}================================================================================${RESET}"
echo -e "${BOLD}${CYAN}                      CUSTOM HELPER SCRIPTS${RESET}"
echo -e "${CYAN}================================================================================${RESET}"
echo ""
echo -e "${YELLOW}toolbox-help${RESET}"
echo "  Show this help message"
echo "  Usage: toolbox-help"
echo ""
echo -e "${YELLOW}toolbox-mount-fs${RESET}"
echo "  Mount target container's filesystem at /target (ephemeral container mode)"
echo "  Usage: toolbox-mount-fs"
echo "  Then: cd /target"
echo ""
echo -e "${YELLOW}toolbox-printenv${RESET}"
echo "  Show environment variables from target container (ephemeral container mode)"
echo "  Usage: toolbox-printenv"
echo ""
echo -e "${YELLOW}toolbox-mysql-locks${RESET}"
echo "  Show MySQL locks and blocking queries"
echo "  Usage: toolbox-mysql-locks -h <host> -u <user> -p"
echo ""
echo -e "${CYAN}================================================================================${RESET}"
echo -e "${BOLD}${CYAN}                    EPHEMERAL CONTAINER USAGE${RESET}"
echo -e "${CYAN}================================================================================${RESET}"
echo ""
echo "To debug a running pod with this toolbox:"
echo -e "${GREEN}"
echo "  kubectl debug -it <pod-name> \\"
echo "    --target=<container-name> \\"
echo "    --image=demmonico/toolbox:latest \\"
echo "    --profile=sysadmin \\"
echo "    --share-processes \\"
echo "    -- zsh"
echo -e "${RESET}"
echo "Once inside:"
echo "  - Run 'toolbox-help' to see this message"
echo "  - Run 'toolbox-printenv' to see target container's environment"
echo "  - Run 'toolbox-mount-fs' to access target container's filesystem"
echo ""
echo -e "${CYAN}================================================================================${RESET}"
